<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pnet: pnet</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">pnet<span id="projectnumber">&#160;1.1.1</span>
   </div>
   <div id="projectbrief">A petri net library for C/C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">pnet </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md0"></a>
pnet - a petri net library for C/C++</h1>
<p >Easily make petri nets in C/C++. This library can create high level timed petri nets, with negated arcs and reset arcs, input events and outputs.</p>
<p >Is intended for embedding!</p>
<p >Created by Jo√£o Peterson Scheffer - 2023. Version 1.1.1.</p>
<p >Licensed under the MIT License. Please reefer to the LICENSE file in the project root for license information.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Usage</h1>
<p >To start include the header file:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="pnet_8h.html">pnet.h</a>&quot;</span></div>
<div class="ttc" id="apnet_8h_html"><div class="ttname"><a href="pnet_8h.html">pnet.h</a></div></div>
</div><!-- fragment --><p >The you can create a new petri net:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structpnet__t.html">pnet_t</a> *pnet = <a class="code hl_function" href="pnet_8h.html#a2c186187da9fa99831354d42388c1224">pnet_new</a>(</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(2,3,</div>
<div class="line">        -1, 0,</div>
<div class="line">         0, 0,</div>
<div class="line">         0, 0</div>
<div class="line">    ),</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(2,3,</div>
<div class="line">         0, 0,</div>
<div class="line">         1, 0,</div>
<div class="line">         0, 1</div>
<div class="line">    ),</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(2,3,</div>
<div class="line">            0, 1,</div>
<div class="line">            0, 0,</div>
<div class="line">            0, 0</div>
<div class="line">    ),</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(2,3,</div>
<div class="line">            0, 0,</div>
<div class="line">            0, 1,</div>
<div class="line">            0, 0</div>
<div class="line">    ),</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a34b69ca2fb36c2b1a313b6cbf6ec1923">pnet_places_init_new</a>(3,</div>
<div class="line">        1, 0, 0</div>
<div class="line">    ),</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a94297a4cba0ef7a1b536e44b828c2121">pnet_transitions_delay_new</a>(2,</div>
<div class="line">        0, 0</div>
<div class="line">    ),</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a383722e962eba6494ca7266807f3ed9c">pnet_inputs_map_new</a>(2,2,</div>
<div class="line">        <a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734aa5ab2ff8c468f016b6e4ca83731c0b80">pnet_event_none</a>, <a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734a040c046cd81f9cc6d71fbe036b368146">pnet_event_pos_edge</a>,</div>
<div class="line">        <a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734aa5ab2ff8c468f016b6e4ca83731c0b80">pnet_event_none</a>, <a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734aa5ab2ff8c468f016b6e4ca83731c0b80">pnet_event_none</a></div>
<div class="line">    ),</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a518cb768cdb943114fb5798897640595">pnet_outputs_map_new</a>(3,3,</div>
<div class="line">        1,0,0,</div>
<div class="line">        0,1,0,</div>
<div class="line">        0,0,1</div>
<div class="line">    ),</div>
<div class="line">    NULL,</div>
<div class="line">    NULL</div>
<div class="line">); </div>
<div class="ttc" id="apnet_8h_html_a0743eb9ef750a2b1005690f87d94351d"><div class="ttname"><a href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a></div><div class="ttdeci">pnet_arcs_map_t * pnet_arcs_map_new(size_t transitions_num, size_t places_num,...)</div><div class="ttdoc">create new arcs map object. It's freed by the calls that receive it as argument</div></div>
<div class="ttc" id="apnet_8h_html_a2c186187da9fa99831354d42388c1224"><div class="ttname"><a href="pnet_8h.html#a2c186187da9fa99831354d42388c1224">pnet_new</a></div><div class="ttdeci">pnet_t * pnet_new(pnet_arcs_map_t *neg_arcs_map, pnet_arcs_map_t *pos_arcs_map, pnet_arcs_map_t *inhibit_arcs_map, pnet_arcs_map_t *reset_arcs_map, pnet_places_t *places_init, pnet_transitions_t *transitions_delay, pnet_inputs_map_t *inputs_map, pnet_outputs_map_t *outputs_map, pnet_callback_t function, void *data)</div><div class="ttdoc">Create a new petri net. All values from the inputs are freed automatically.</div></div>
<div class="ttc" id="apnet_8h_html_a34b69ca2fb36c2b1a313b6cbf6ec1923"><div class="ttname"><a href="pnet_8h.html#a34b69ca2fb36c2b1a313b6cbf6ec1923">pnet_places_init_new</a></div><div class="ttdeci">pnet_places_t * pnet_places_init_new(size_t places_num,...)</div><div class="ttdoc">create new places init object. It's freed by the calls that receive it as argument</div></div>
<div class="ttc" id="apnet_8h_html_a383722e962eba6494ca7266807f3ed9c"><div class="ttname"><a href="pnet_8h.html#a383722e962eba6494ca7266807f3ed9c">pnet_inputs_map_new</a></div><div class="ttdeci">pnet_inputs_map_t * pnet_inputs_map_new(size_t transitions_num, size_t inputs_num,...)</div><div class="ttdoc">create new inputs map object. It's freed by the calls that receive it as argument</div></div>
<div class="ttc" id="apnet_8h_html_a48733fe321fc141f6f9e249740610734a040c046cd81f9cc6d71fbe036b368146"><div class="ttname"><a href="pnet_8h.html#a48733fe321fc141f6f9e249740610734a040c046cd81f9cc6d71fbe036b368146">pnet_event_pos_edge</a></div><div class="ttdeci">@ pnet_event_pos_edge</div><div class="ttdef"><b>Definition:</b> pnet.h:384</div></div>
<div class="ttc" id="apnet_8h_html_a48733fe321fc141f6f9e249740610734aa5ab2ff8c468f016b6e4ca83731c0b80"><div class="ttname"><a href="pnet_8h.html#a48733fe321fc141f6f9e249740610734aa5ab2ff8c468f016b6e4ca83731c0b80">pnet_event_none</a></div><div class="ttdeci">@ pnet_event_none</div><div class="ttdef"><b>Definition:</b> pnet.h:383</div></div>
<div class="ttc" id="apnet_8h_html_a518cb768cdb943114fb5798897640595"><div class="ttname"><a href="pnet_8h.html#a518cb768cdb943114fb5798897640595">pnet_outputs_map_new</a></div><div class="ttdeci">pnet_outputs_map_t * pnet_outputs_map_new(size_t outputs_num, size_t places_num,...)</div><div class="ttdoc">create new outputs map object. It's freed by the calls that receive it as argument</div></div>
<div class="ttc" id="apnet_8h_html_a94297a4cba0ef7a1b536e44b828c2121"><div class="ttname"><a href="pnet_8h.html#a94297a4cba0ef7a1b536e44b828c2121">pnet_transitions_delay_new</a></div><div class="ttdeci">pnet_transitions_t * pnet_transitions_delay_new(size_t transitions_num,...)</div><div class="ttdoc">create new transitions delay object. It's freed by the calls that receive it as argument</div></div>
<div class="ttc" id="astructpnet__t_html"><div class="ttname"><a href="structpnet__t.html">pnet_t</a></div><div class="ttdoc">struct that represents a petri net</div><div class="ttdef"><b>Definition:</b> pnet.h:449</div></div>
</div><!-- fragment --><p >Note how you can pass weighted arcs, inhibit arcs, reset arcs, the initial tokens for the places, delay for transitions, inputs events and outputs in order, however, only the <code>places_init</code> and <b>at least one</b> type of arc are required, so very simple declarations can be made, like this:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structpnet__t.html">pnet_t</a> *pnet = <a class="code hl_function" href="pnet_8h.html#a2c186187da9fa99831354d42388c1224">pnet_new</a>(</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(1,2,</div>
<div class="line">        -1,</div>
<div class="line">        0</div>
<div class="line">    ),</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(1,2,</div>
<div class="line">        0, </div>
<div class="line">        1</div>
<div class="line">    ),</div>
<div class="line">    NULL,</div>
<div class="line">    NULL,</div>
<div class="line">    <a class="code hl_function" href="pnet_8h.html#a34b69ca2fb36c2b1a313b6cbf6ec1923">pnet_places_init_new</a>(2,</div>
<div class="line">        1, 0</div>
<div class="line">    ),</div>
<div class="line">    NULL,</div>
<div class="line">    NULL,</div>
<div class="line">    NULL,</div>
<div class="line">    NULL,</div>
<div class="line">    NULL</div>
<div class="line">);</div>
</div><!-- fragment --><p >To execute your petri net just call <code>pnet_fire</code>:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="pnet_8h.html#a6311d27b175c4baa51b5b63bb1eb3623">pnet_fire</a>(pnet, <a class="code hl_function" href="pnet_8h.html#af0767e36eb96a67323f0ef9122668264">pnet_inputs_new</a>(2, 1,0))</div>
<div class="ttc" id="apnet_8h_html_a6311d27b175c4baa51b5b63bb1eb3623"><div class="ttname"><a href="pnet_8h.html#a6311d27b175c4baa51b5b63bb1eb3623">pnet_fire</a></div><div class="ttdeci">void pnet_fire(pnet_t *pnet, pnet_inputs_t *inputs)</div><div class="ttdoc">fire the transitions based on the inputs and internal state. Sensitive transitions are NOT updated af...</div></div>
<div class="ttc" id="apnet_8h_html_af0767e36eb96a67323f0ef9122668264"><div class="ttname"><a href="pnet_8h.html#af0767e36eb96a67323f0ef9122668264">pnet_inputs_new</a></div><div class="ttdeci">pnet_inputs_t * pnet_inputs_new(size_t inputs_num,...)</div><div class="ttdoc">create new inputs object. It's freed by the calls that receive it as argument</div></div>
</div><!-- fragment --><p >This will execute <b>one and only transition</b> at a time, so the execution is made in stepped manner.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Arguments</h2>
<h3><a class="anchor" id="autotoc_md3"></a>
Weighted arcs</h3>
<p >Weighted arcs define the amount of token that are consumed and given by some transition. Represented in matrix form by two matrices, it's shape should be like:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(2,3,</div>
<div class="line">    -1, 0,</div>
<div class="line">     0, 0,</div>
<div class="line">     0, 0</div>
<div class="line">),</div>
<div class="line"><a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(2,3,</div>
<div class="line">     0, 0,</div>
<div class="line">     1, 0,</div>
<div class="line">     0, 1</div>
<div class="line">),</div>
</div><!-- fragment --><p >The first matrix are the positive weights, the second are the negative weights. Where 2 is the amount of transitions, and 3 the amount of places, notice how the columns represent the transitions and rows the places. In the example we are telling that for the first transition, 1 token will be consumed from the first place, and 1 token will be given to the second place, and for the second transition, a token will be given to the third place.</p>
<p >When there are no negative weights, a transition can fire at any time, so negative weights act as conditions/restrictions for a transition to fire.</p>
<h3><a class="anchor" id="autotoc_md4"></a>
Inhibit arcs</h3>
<p >Inhibit arcs define that a transition shall occur when there are no token in the specified place. Represented in matrix form, values can be only 1 or 0:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(2,3,</div>
<div class="line">    0, 1,</div>
<div class="line">    0, 0,</div>
<div class="line">    0, 0</div>
<div class="line">),</div>
</div><!-- fragment --><p >In the example we are saying that for the second transition to fire, no tokens can be present in the first place. This type of arc doesn't move any tokens like the reset or weighted arcs, it solely represents a condition, like the negative weights in the weighted arcs.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
Reset arcs</h3>
<p >Reset arcs express the act of setting the number of tokens in a place to 0 if the transition specified is fired. Represented in matrix form, values can be only 1 or 0:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="pnet_8h.html#a0743eb9ef750a2b1005690f87d94351d">pnet_arcs_map_new</a>(2,3,</div>
<div class="line">    0, 0,</div>
<div class="line">    0, 1,</div>
<div class="line">    0, 0</div>
<div class="line">),</div>
</div><!-- fragment --><p >In the example we are saying that the second transition will reset the tokens in the second place when fired. This type of arc expresses change, like the weighted arcs, but no condition/restriction.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
Input events</h3>
<p >Inputs can be passed to <code>pnet_fire</code> and based on the events set by the <code>inputs_map</code> argument in <code>pnet_new</code> can dictate the triggering of transitions.</p>
<p ><code>inputs_map</code> is given in matrix form, only the values of the enumerator <code>pnet_event_t</code> are valid.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="pnet_8h.html#a383722e962eba6494ca7266807f3ed9c">pnet_inputs_map_new</a>(2,2,</div>
<div class="line">    <a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734aa5ab2ff8c468f016b6e4ca83731c0b80">pnet_event_none</a>, <a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734a040c046cd81f9cc6d71fbe036b368146">pnet_event_pos_edge</a>,</div>
<div class="line">    <a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734aa5ab2ff8c468f016b6e4ca83731c0b80">pnet_event_none</a>, <a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734aa5ab2ff8c468f016b6e4ca83731c0b80">pnet_event_none</a></div>
<div class="line">),</div>
</div><!-- fragment --><p >The columns are the transitions and the rows are the inputs.</p>
<p >Only one input event can be assigned to a single transition.</p>
<p ><code>pnet_event_none</code> and 0 are the same.</p>
<p >The events are as follow:</p>
<div class="fragment"><div class="line"><a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734aa5ab2ff8c468f016b6e4ca83731c0b80">pnet_event_none</a>         <span class="comment">// no event, always trigger if arc conditions are met</span></div>
<div class="line"><a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734a040c046cd81f9cc6d71fbe036b368146">pnet_event_pos_edge</a>     <span class="comment">// when input changes from 0 to 1 between fires</span></div>
<div class="line"><a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734a547c8fef7f80cc60b3f197dea3b28eab">pnet_event_neg_edge</a>     <span class="comment">// when input changes from 1 to 0 between fires</span></div>
<div class="line"><a class="code hl_enumvalue" href="pnet_8h.html#a48733fe321fc141f6f9e249740610734af6ffcf0341189763aa0a8e2b4b36f22c">pnet_event_any_edge</a>     <span class="comment">// when input changes value between fires</span></div>
<div class="ttc" id="apnet_8h_html_a48733fe321fc141f6f9e249740610734a547c8fef7f80cc60b3f197dea3b28eab"><div class="ttname"><a href="pnet_8h.html#a48733fe321fc141f6f9e249740610734a547c8fef7f80cc60b3f197dea3b28eab">pnet_event_neg_edge</a></div><div class="ttdeci">@ pnet_event_neg_edge</div><div class="ttdef"><b>Definition:</b> pnet.h:385</div></div>
<div class="ttc" id="apnet_8h_html_a48733fe321fc141f6f9e249740610734af6ffcf0341189763aa0a8e2b4b36f22c"><div class="ttname"><a href="pnet_8h.html#a48733fe321fc141f6f9e249740610734af6ffcf0341189763aa0a8e2b4b36f22c">pnet_event_any_edge</a></div><div class="ttdeci">@ pnet_event_any_edge</div><div class="ttdef"><b>Definition:</b> pnet.h:386</div></div>
</div><!-- fragment --><p >Firing can be called with or without inputs:</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="pnet_8h.html#a6311d27b175c4baa51b5b63bb1eb3623">pnet_fire</a>(pnet, <a class="code hl_function" href="pnet_8h.html#af0767e36eb96a67323f0ef9122668264">pnet_inputs_new</a>(2, 1,0))</div>
</div><!-- fragment --><div class="fragment"><div class="line"><a class="code hl_function" href="pnet_8h.html#a6311d27b175c4baa51b5b63bb1eb3623">pnet_fire</a>(pnet, NULL)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md7"></a>
Delay</h3>
<p >You can add delay to transitions by mapping the value in milliseconds to every transition, a 0 represents a instant transition. Given in matrix form, one row and the columns are the transitions.</p>
<div class="fragment"><div class="line"><span class="comment">// 500 ms delay on transition 0</span></div>
<div class="line"><a class="code hl_function" href="pnet_8h.html#a94297a4cba0ef7a1b536e44b828c2121">pnet_transitions_delay_new</a>(2,</div>
<div class="line">    500, 0                                                      </div>
<div class="line">),</div>
</div><!-- fragment --><p >Note that when using instant transitions, after the <code><a class="el" href="pnet_8h.html#a6311d27b175c4baa51b5b63bb1eb3623" title="fire the transitions based on the inputs and internal state. Sensitive transitions are NOT updated af...">pnet_fire()</a></code> call, the tokens would have moved already, but when using a delay you can only expect the net state after the define time, so to react accordingly you have to provide a callback, see section Callback. When a callback is given it will be called after a delayed transition is fired.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Outputs</h3>
<p >Outputs are given in matrix form, values can be only 1 and 0.</p>
<div class="fragment"><div class="line"><a class="code hl_function" href="pnet_8h.html#a518cb768cdb943114fb5798897640595">pnet_outputs_map_new</a>(3,3,</div>
<div class="line">    1,0,0,</div>
<div class="line">    0,1,0,</div>
<div class="line">    0,0,1</div>
<div class="line">)</div>
</div><!-- fragment --><p >The columns are the outputs and the rows are the places. A output is only 1 when there &gt;0 tokens inside the respective place.</p>
<p >The state of the outputs can be accessed reading the <code>outputs</code> member of the <code><a class="el" href="structpnet__t.html" title="struct that represents a petri net">pnet_t</a></code> struct.</p>
<div class="fragment"><div class="line">pnet-&gt;<a class="code hl_variable" href="structpnet__t.html#aa87959723b2b97347ee86757d90fabb9">outputs</a></div>
<div class="ttc" id="astructpnet__t_html_aa87959723b2b97347ee86757d90fabb9"><div class="ttname"><a href="structpnet__t.html#aa87959723b2b97347ee86757d90fabb9">pnet_t::outputs</a></div><div class="ttdeci">pnet_matrix_t * outputs</div><div class="ttdef"><b>Definition:</b> pnet.h:477</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
Callback</h3>
<p >A callback of type <code>pnet_callback_t</code> must be provided as argument when using timed transitions. <b>It will</b> be called after the execution of the delay for a given transition and that transition is still sensible. <b>It will not be called</b> when a instant transition was fired.</p>
<p >It's form is as follows:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> cb(<a class="code hl_struct" href="structpnet__t.html">pnet_t</a> *pnet, <span class="keywordtype">size_t</span> transition, <span class="keywordtype">void</span> *data){</div>
<div class="line">    your_data_struct *my_data = (your_data_struct*)data;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// you code here</span></div>
<div class="line">}</div>
</div><!-- fragment --><p >You can access the pnet directly through the callback as well a user data passed in the <code>data</code> parameter on the <code><a class="el" href="pnet_8h.html#a2c186187da9fa99831354d42388c1224" title="Create a new petri net. All values from the inputs are freed automatically.">pnet_new()</a></code> and <code><a class="el" href="pnet_8h.html#a6ba895e38a59021e1c2aa132bae5fef6" title="Create a new petri net, uses pnet_matrix_t as argument type. All values from the inputs are freed aut...">m_pnet_new()</a></code> calls.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Error handling</h2>
<p >Errors are bound to occur when defining the petri net, we can check for then by comparing the pointer return value from the calls and by using the <code>pnet_get_error</code> and <code>pnet_get_error_msg</code> calls.</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structpnet__t.html">pnet_t</a> *pnet = <a class="code hl_function" href="pnet_8h.html#a2c186187da9fa99831354d42388c1224">pnet_new</a>();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(pnet == NULL || <a class="code hl_function" href="pnet_8h.html#abef56128c08df39114abc2074056a949">pnet_get_error</a>() != pnet_info_ok){</div>
<div class="line">    <span class="comment">// error handling</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// or </span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(pnet != NULL &amp;&amp; <a class="code hl_function" href="pnet_8h.html#abef56128c08df39114abc2074056a949">pnet_get_error</a>() == pnet_info_ok){</div>
<div class="line">    <span class="comment">// do petri net stuff </span></div>
<div class="line">}</div>
<div class="ttc" id="apnet_8h_html_abef56128c08df39114abc2074056a949"><div class="ttname"><a href="pnet_8h.html#abef56128c08df39114abc2074056a949">pnet_get_error</a></div><div class="ttdeci">pnet_error_t pnet_get_error(void)</div><div class="ttdoc">get error code from latest execution</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11"></a>
Compile and install</h1>
<p >Compilation is done by executing:</p>
<div class="fragment"><div class="line">$ make release</div>
</div><!-- fragment --><p >Installation is done by executing:</p>
<div class="fragment"><div class="line">$ make install</div>
</div><!-- fragment --><p >The location of installation can be configured in the [Makefile](Makefile) by altering the following variables:</p>
<div class="fragment"><div class="line">INSTALL_BIN_DIR</div>
<div class="line">INSTALL_LIB_DIR</div>
<div class="line">INSTALL_INC_DIR</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md12"></a>
Implementation details</h1>
<p >This implementation uses matrix representation and custom independent algorithms by the author for sensing and firing the petri net.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
TODO</h1>
<ul>
<li>Prioritized petri net, add priority to transitions</li>
<li>Make special calls for reading the output, or make up another type of abstraction that don't involves matrix_int_t</li>
<li>Callback for output change</li>
<li>Analysis tools</li>
<li>PNML support</li>
<li>Doxygen doc page</li>
<li>Badges on readme</li>
<li>Better abstraction for embedding purposes</li>
<li>Timed implementation for embedded systems, custom timers</li>
<li>Custom memory allocator option</li>
<li>Compile macro for minimal build, used for excluding some logic checking and abstraction so the library could be compiled for minimal space keeping in mind embedded systems </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
